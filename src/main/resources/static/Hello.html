<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml" xmlns:c="http://www.w3.org/1999/XSL/Transform">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        function upImgFile() {
            var reads = new FileReader();
            f = document.getElementById('upImg').files[0]

            let img=new FormData();
            img.append('file',f);

            $.ajax({
                url:'/test',
                type: 'put',
                dataType: 'json',
                contentType:false,
                data:img,
                processData:false,
                success(res){
                    picture = res.httpUrl
                    console.log(picture)
                    change(picture)
                }
            })
            var Url = new FormData()
            // reads.readAsDataURL(f);
            function change(url) {
                document.getElementById('headImg').src = url;
                Url.append('headPortrait',url)
                $.ajax({
                    url:'/test',
                    type:'post',
                    dataType:'json',
                    contentType: false,
                    processData:false,
                    data:Url,
                    success(res) {
                        console.log(res)
                    }
                })
            };
        }
    </script>
</head>
<body>
<p>hello world!</p>
<p th:text="欢迎您，+${userLoginInfo.userRole.name}+${userLoginInfo.name}"></p>
<a href="/insertUser">新增用户</a>
<a href="/deleteUserByUserId">删除用户</a>
<a href="/updateUser">更新用户</a>
<a href="/findUserPersonalInfo">查询用户信息</a>
<a href="/findUsers">查询全部用户信息</a>
<a href="/findOpinion">查询用户意见信息</a>
<a href="/deleteUserOpinion">删除用户意见信息</a>
<a href="/updateUserOpinion">更新用户意见信息</a>
<!--用户-->
<!--<table cellpadding="0" cellspacing="0">-->
    <!--<tr class="firstTr">-->
        <!--<th width="10%">用户id</th>-->
        <!--<th width="20%">姓名</th>-->
        <!--<th width="10%">性别</th>-->
        <!--<th width="10%">邮箱</th>-->
        <!--<th width="10%">密码</th>-->
        <!--<th width="10%">手机号码</th>-->
        <!--<th width="10%">用户类型</th>-->
        <!--<th width="30%">操作</th>-->
    <!--</tr>-->
    <!--<c:forEach var="user" items="${users}">-->
        <!--<tr>-->
            <!--<td>${user.user_id}</td>-->
            <!--<td>${user.name}</td>-->
            <!--<td>${user.gender}</td>-->
            <!--<td>${user.email}</td>-->
            <!--<td>${user.phone}</td>-->
            <!--<td>${user.userRole.name}</td>-->
            <!--<c:if test="${userLoginInfo.userRole.role_id==1}">-->
                <!--<td>-->
                    <!--<a href="/insertUser">新增用户</a>-->
                    <!--<a href="/deleteUserByUserId?user_id=${user.user_id}">删除用户</a>-->
                    <!--<a href="/updateUser?user_id=${user.user_id}">更新用户</a>-->
                <!--</td>-->
            <!--</c:if>-->
        <!--</tr>-->
    <!--</c:forEach>-->
<!--</table>-->
    <form action="/insertOpinion" method="post">
        <table>
            <td><input type="text" name="opinion"/></td>
            <td>请传入图片<br>必须是jpg格式</td>
            <td><input type="file" name="picture" style="border: 0px; font-size: 20px;"/></td>
            <a>本地上传
                <input type="file" id="upImg" onchange="upImgFile()" class="upImg">
            </a>
            <input type="submit" value="submit"/>
        </table>
    </form>
</body>
</html>